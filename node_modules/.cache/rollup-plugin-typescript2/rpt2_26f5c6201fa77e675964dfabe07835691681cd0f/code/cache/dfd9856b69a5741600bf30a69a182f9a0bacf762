{"code":"import dayjs from 'dayjs';\r\nimport _isEmpty from 'lodash/isEmpty';\r\nexport function handleActive(args, item) {\r\n    var selectedDate = args.selectedDate;\r\n    var _value = item._value;\r\n    var start = selectedDate.start, end = selectedDate.end;\r\n    var dayjsEnd = dayjs(end);\r\n    var dayjsStart = start ? dayjs(start) : dayjsEnd;\r\n    item.isSelected =\r\n        (_value === null || _value === void 0 ? void 0 : _value.isSame(dayjsEnd)) ||\r\n            (_value === null || _value === void 0 ? void 0 : _value.isSame(dayjsStart)) ||\r\n            ((_value === null || _value === void 0 ? void 0 : _value.isAfter(dayjsStart)) && (_value === null || _value === void 0 ? void 0 : _value.isBefore(dayjsEnd)));\r\n    item.isSelectedHead = _value === null || _value === void 0 ? void 0 : _value.isSame(dayjsStart);\r\n    item.isSelectedTail = _value === null || _value === void 0 ? void 0 : _value.isSame(dayjsEnd);\r\n    item.isToday = (_value === null || _value === void 0 ? void 0 : _value.diff(dayjs(Date.now()).startOf('day'), 'day')) === 0;\r\n    return item;\r\n}\r\nexport function handleMarks(args, item) {\r\n    var options = args.options;\r\n    var _value = item._value;\r\n    var marks = options.marks;\r\n    var markList = marks.filter(function (mark) {\r\n        return _value ? dayjs(mark.value).startOf('day').isSame(_value) : false;\r\n    });\r\n    item.marks = markList.slice(0, 1);\r\n    return item;\r\n}\r\n// export function handleSelectedDates (args: PluginArg): Calendar.Item {\r\n// const { item, options } = args\r\n// const { _value } = item\r\n// const { selectedDates } = options\r\n// if (selectedDates.length === 0) return args\r\n// _forEach(selectedDates, date => {\r\n//   const { isSelected, isHead, isTail } = item\r\n//   // 如果当前 Item 已经具备了 三种状态下 无需继续判断 跳出循环\r\n//   if (isSelected) {\r\n//     return false\r\n//   }\r\n//   const { start, end } = date\r\n//   const dayjsEnd = dayjs(end).startOf('day')\r\n//   const dayjsStart = dayjs(start).startOf('day')\r\n//   item.isSelected =\r\n//     item.isSelected ||\r\n//     (_value.isAfter(dayjsStart) && _value.isBefore(dayjsEnd))\r\n//   item.isHead = item.isHead || _value.isSame(dayjsStart)\r\n//   item.isTail = item.isTail || _value.isSame(dayjsEnd)\r\n// })\r\n//   return item\r\n// }\r\nexport function handleDisabled(args, item) {\r\n    var options = args.options;\r\n    var _value = item._value;\r\n    var minDate = options.minDate, maxDate = options.maxDate;\r\n    var dayjsMinDate = dayjs(minDate);\r\n    var dayjsMaxDate = dayjs(maxDate);\r\n    item.isDisabled =\r\n        !!(minDate && (_value === null || _value === void 0 ? void 0 : _value.isBefore(dayjsMinDate))) ||\r\n            !!(maxDate && (_value === null || _value === void 0 ? void 0 : _value.isAfter(dayjsMaxDate)));\r\n    return item;\r\n}\r\nexport function handleValid(args, item) {\r\n    var options = args.options;\r\n    var _value = item._value;\r\n    var validDates = options.validDates;\r\n    if (!_isEmpty(validDates)) {\r\n        var isInclude = validDates.some(function (date) {\r\n            return _value ? dayjs(date.value).startOf('day').isSame(_value) : false;\r\n        });\r\n        item.isDisabled = !isInclude;\r\n    }\r\n    delete item._value;\r\n    return item;\r\n}\r\nexport default [handleActive, handleMarks, handleDisabled, handleValid];\r\n//# sourceMappingURL=plugins.js.map","references":["/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/dayjs@1.7.7/node_modules/dayjs/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/lodash@4.17.10/node_modules/lodash/isEmpty.js","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/types/calendar.d.ts"],"map":"{\"version\":3,\"file\":\"plugins.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/calendar/common/plugins.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,KAAK,MAAM,OAAO,CAAA;AACzB,OAAO,QAAQ,MAAM,gBAAgB,CAAA;AASrC,MAAM,UAAU,YAAY,CAC1B,IAAe,EACf,IAAmB;IAEX,IAAA,YAAY,GAAK,IAAI,aAAT,CAAS;IACrB,IAAA,MAAM,GAAK,IAAI,OAAT,CAAS;IAEf,IAAA,KAAK,GAAU,YAAY,MAAtB,EAAE,GAAG,GAAK,YAAY,IAAjB,CAAiB;IAEnC,IAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,CAAA;IAC3B,IAAM,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAA;IAElD,IAAI,CAAC,UAAU;QACb,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,CAAC,QAAQ,CAAC;aACxB,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,CAAC,UAAU,CAAC,CAAA;YAC1B,CAAC,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,OAAO,CAAC,UAAU,CAAC,MAAI,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,QAAQ,CAAC,QAAQ,CAAC,CAAA,CAAC,CAAA;IAE7D,IAAI,CAAC,cAAc,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,CAAC,UAAU,CAAC,CAAA;IAChD,IAAI,CAAC,cAAc,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,CAAC,QAAQ,CAAC,CAAA;IAE9C,IAAI,CAAC,OAAO,GAAG,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,MAAK,CAAC,CAAA;IAE1E,OAAO,IAAI,CAAA;AACb,CAAC;AAED,MAAM,UAAU,WAAW,CACzB,IAAe,EACf,IAAmB;IAEX,IAAA,OAAO,GAAK,IAAI,QAAT,CAAS;IAChB,IAAA,MAAM,GAAK,IAAI,OAAT,CAAS;IACf,IAAA,KAAK,GAAK,OAAO,MAAZ,CAAY;IAEzB,IAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,UAAA,IAAI;QAChC,OAAA,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK;IAAhE,CAAgE,CACjE,CAAA;IAED,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IAEjC,OAAO,IAAI,CAAA;AACb,CAAC;AAED,yEAAyE;AACzE,iCAAiC;AACjC,0BAA0B;AAC1B,oCAAoC;AAEpC,8CAA8C;AAE9C,oCAAoC;AACpC,gDAAgD;AAEhD,yCAAyC;AACzC,sBAAsB;AACtB,mBAAmB;AACnB,MAAM;AAEN,gCAAgC;AAEhC,+CAA+C;AAC/C,mDAAmD;AAEnD,sBAAsB;AACtB,yBAAyB;AACzB,gEAAgE;AAEhE,2DAA2D;AAE3D,yDAAyD;AACzD,KAAK;AAEL,gBAAgB;AAChB,IAAI;AAEJ,MAAM,UAAU,cAAc,CAC5B,IAAe,EACf,IAAmB;IAEX,IAAA,OAAO,GAAK,IAAI,QAAT,CAAS;IAChB,IAAA,MAAM,GAAK,IAAI,OAAT,CAAS;IACf,IAAA,OAAO,GAAc,OAAO,QAArB,EAAE,OAAO,GAAK,OAAO,QAAZ,CAAY;IAEpC,IAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,CAAA;IACnC,IAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,CAAA;IAEnC,IAAI,CAAC,UAAU;QACb,CAAC,CAAC,CAAC,OAAO,KAAI,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,QAAQ,CAAC,YAAY,CAAC,CAAA,CAAC;YAC7C,CAAC,CAAC,CAAC,OAAO,KAAI,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,OAAO,CAAC,YAAY,CAAC,CAAA,CAAC,CAAA;IAE9C,OAAO,IAAI,CAAA;AACb,CAAC;AAED,MAAM,UAAU,WAAW,CACzB,IAAe,EACf,IAAmB;IAEX,IAAA,OAAO,GAAK,IAAI,QAAT,CAAS;IAChB,IAAA,MAAM,GAAK,IAAI,OAAT,CAAS;IACf,IAAA,UAAU,GAAK,OAAO,WAAZ,CAAY;IAE9B,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;QACzB,IAAM,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC,UAAA,IAAI;YACpC,OAAA,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK;QAAhE,CAAgE,CACjE,CAAA;QAED,IAAI,CAAC,UAAU,GAAG,CAAC,SAAS,CAAA;KAC7B;IAED,OAAO,IAAI,CAAC,MAAM,CAAA;IAElB,OAAO,IAAI,CAAA;AACb,CAAC;AAED,eAAe,CAAC,YAAY,EAAE,WAAW,EAAE,cAAc,EAAE,WAAW,CAAC,CAAA\"}"}
