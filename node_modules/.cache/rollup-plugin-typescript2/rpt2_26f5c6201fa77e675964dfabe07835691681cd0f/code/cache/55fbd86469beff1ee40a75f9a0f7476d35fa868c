{"code":"import { __extends, __read } from \"tslib\";\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { View } from '@tarojs/components';\r\nimport AtCountdownItem from './item';\r\nvar toSeconds = function (day, hours, minutes, seconds) { return day * 60 * 60 * 24 + hours * 60 * 60 + minutes * 60 + seconds; };\r\nvar defaultFormat = {\r\n    day: '天',\r\n    hours: '时',\r\n    minutes: '分',\r\n    seconds: '秒'\r\n};\r\nvar AtCountdown = /** @class */ (function (_super) {\r\n    __extends(AtCountdown, _super);\r\n    function AtCountdown(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        var _a = _this.props, _b = _a.day, day = _b === void 0 ? 0 : _b, _c = _a.hours, hours = _c === void 0 ? 0 : _c, _d = _a.minutes, minutes = _d === void 0 ? 0 : _d, _e = _a.seconds, seconds = _e === void 0 ? 0 : _e;\r\n        _this.seconds = toSeconds(day, hours, minutes, seconds);\r\n        var _f = _this.calculateTime(), _day = _f.day, _hours = _f.hours, _minutes = _f.minutes, _seconds = _f.seconds;\r\n        _this.state = {\r\n            _day: _day,\r\n            _hours: _hours,\r\n            _minutes: _minutes,\r\n            _seconds: _seconds\r\n        };\r\n        return _this;\r\n    }\r\n    AtCountdown.prototype.setTimer = function () {\r\n        if (!this.timer)\r\n            this.countdonwn();\r\n    };\r\n    AtCountdown.prototype.clearTimer = function () {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n            this.timer = 0;\r\n        }\r\n    };\r\n    AtCountdown.prototype.calculateTime = function () {\r\n        var _a = __read([0, 0, 0, 0], 4), day = _a[0], hours = _a[1], minutes = _a[2], seconds = _a[3];\r\n        if (this.seconds > 0) {\r\n            day = this.props.isShowDay ? Math.floor(this.seconds / (60 * 60 * 24)) : 0;\r\n            hours = this.props.isShowHour\r\n                ? Math.floor(this.seconds / (60 * 60)) - day * 24\r\n                : 0;\r\n            minutes = this.props.isShowMinute\r\n                ? Math.floor(this.seconds / 60) - day * 24 * 60 - hours * 60\r\n                : 0;\r\n            seconds =\r\n                Math.floor(this.seconds) -\r\n                    day * 24 * 60 * 60 -\r\n                    hours * 60 * 60 -\r\n                    minutes * 60;\r\n        }\r\n        return {\r\n            day: day,\r\n            hours: hours,\r\n            minutes: minutes,\r\n            seconds: seconds\r\n        };\r\n    };\r\n    AtCountdown.prototype.countdonwn = function () {\r\n        var _this = this;\r\n        var _a = this.calculateTime(), day = _a.day, hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\r\n        this.setState({\r\n            _day: day,\r\n            _hours: hours,\r\n            _minutes: minutes,\r\n            _seconds: seconds\r\n        });\r\n        this.seconds--;\r\n        if (this.seconds < 0) {\r\n            this.clearTimer();\r\n            this.props.onTimeUp && this.props.onTimeUp();\r\n            return;\r\n        }\r\n        this.timer = setTimeout(function () {\r\n            _this.countdonwn();\r\n        }, 1000);\r\n    };\r\n    AtCountdown.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\r\n        if (JSON.stringify(this.props) === JSON.stringify(nextProps))\r\n            return;\r\n        var _a = nextProps.day, day = _a === void 0 ? 0 : _a, _b = nextProps.hours, hours = _b === void 0 ? 0 : _b, _c = nextProps.minutes, minutes = _c === void 0 ? 0 : _c, _d = nextProps.seconds, seconds = _d === void 0 ? 0 : _d;\r\n        this.seconds = toSeconds(day, hours, minutes, seconds);\r\n        this.clearTimer();\r\n        this.setTimer();\r\n    };\r\n    AtCountdown.prototype.componentDidMount = function () {\r\n        this.setTimer();\r\n    };\r\n    AtCountdown.prototype.componentWillUnmount = function () {\r\n        this.clearTimer();\r\n    };\r\n    AtCountdown.prototype.componentDidHide = function () {\r\n        this.clearTimer();\r\n    };\r\n    AtCountdown.prototype.componentDidShow = function () {\r\n        this.setTimer();\r\n    };\r\n    AtCountdown.prototype.render = function () {\r\n        var _a = this.props, className = _a.className, customStyle = _a.customStyle, _b = _a.format, format = _b === void 0 ? defaultFormat : _b, isCard = _a.isCard, isShowDay = _a.isShowDay, isShowHour = _a.isShowHour, isShowMinute = _a.isShowMinute;\r\n        var _c = this.state, _day = _c._day, _hours = _c._hours, _minutes = _c._minutes, _seconds = _c._seconds;\r\n        return (React.createElement(View, { className: classNames({\r\n                'at-countdown': true,\r\n                'at-countdown--card': isCard\r\n            }, className), style: customStyle },\r\n            isShowDay && (React.createElement(AtCountdownItem, { num: _day, separator: (format === null || format === void 0 ? void 0 : format.day) || '天' })),\r\n            isShowHour && (React.createElement(AtCountdownItem, { num: _hours, separator: (format === null || format === void 0 ? void 0 : format.hours) || '' })),\r\n            isShowMinute && (React.createElement(AtCountdownItem, { num: _minutes, separator: (format === null || format === void 0 ? void 0 : format.minutes) || '' })),\r\n            React.createElement(AtCountdownItem, { num: _seconds, separator: (format === null || format === void 0 ? void 0 : format.seconds) || '' })));\r\n    };\r\n    return AtCountdown;\r\n}(React.Component));\r\nexport default AtCountdown;\r\nAtCountdown.defaultProps = {\r\n    customStyle: '',\r\n    className: '',\r\n    isCard: false,\r\n    isShowDay: false,\r\n    isShowHour: true,\r\n    isShowMinute: true,\r\n    format: defaultFormat,\r\n    day: 0,\r\n    hours: 0,\r\n    minutes: 0,\r\n    seconds: 0\r\n};\r\nAtCountdown.propTypes = {\r\n    customStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\r\n    className: PropTypes.oneOfType([PropTypes.array, PropTypes.string]),\r\n    isCard: PropTypes.bool,\r\n    isShowDay: PropTypes.bool,\r\n    isShowHour: PropTypes.bool,\r\n    isShowMinute: PropTypes.bool,\r\n    format: PropTypes.object,\r\n    day: PropTypes.number,\r\n    hours: PropTypes.number,\r\n    minutes: PropTypes.number,\r\n    seconds: PropTypes.number,\r\n    onTimeUp: PropTypes.func\r\n};\r\n//# sourceMappingURL=index.js.map","references":["/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+classnames@2.2.10/node_modules/@types/classnames/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/prop-types@15.7.2/node_modules/prop-types/index.js","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+react@18.2.21/node_modules/@types/react/ts5.0/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@tarojs+components@3.6.6_@types+react-native@0.64.13_@types+react@18.2.21_react@18.2.0/node_modules/@tarojs/components/types/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/types/countdown.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/src/components/countdown/item/index.tsx"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/countdown/index.tsx\"],\"names\":[],\"mappings\":\";AAAA,OAAO,UAAU,MAAM,YAAY,CAAA;AACnC,OAAO,SAAyB,MAAM,YAAY,CAAA;AAClD,OAAO,KAAK,MAAM,OAAO,CAAA;AACzB,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAA;AAEzC,OAAO,eAAe,MAAM,QAAQ,CAAA;AASpC,IAAM,SAAS,GAAG,UAChB,GAAW,EACX,KAAa,EACb,OAAe,EACf,OAAe,IACJ,OAAA,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,OAAO,GAAG,EAAE,GAAG,OAAO,EAA7D,CAA6D,CAAA;AAE1E,IAAM,aAAa,GAAG;IACpB,GAAG,EAAE,GAAG;IACR,KAAK,EAAE,GAAG;IACV,OAAO,EAAE,GAAG;IACZ,OAAO,EAAE,GAAG;CACb,CAAA;AAED;IAAyC,+BAGxC;IAOC,qBAAmB,KAAuB;QAA1C,YACE,kBAAM,KAAK,CAAC,SAgBb;QAfO,IAAA,KAAmD,KAAI,CAAC,KAAK,EAA3D,WAAO,EAAP,GAAG,mBAAG,CAAC,KAAA,EAAE,aAAS,EAAT,KAAK,mBAAG,CAAC,KAAA,EAAE,eAAW,EAAX,OAAO,mBAAG,CAAC,KAAA,EAAE,eAAW,EAAX,OAAO,mBAAG,CAAC,KAAe,CAAA;QACnE,KAAI,CAAC,OAAO,GAAG,SAAS,CAAC,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC,CAAA;QAChD,IAAA,KAKF,KAAI,CAAC,aAAa,EAAE,EAJjB,IAAI,SAAA,EACF,MAAM,WAAA,EACJ,QAAQ,aAAA,EACR,QAAQ,aACK,CAAA;QAExB,KAAI,CAAC,KAAK,GAAG;YACX,IAAI,MAAA;YACJ,MAAM,QAAA;YACN,QAAQ,UAAA;YACR,QAAQ,UAAA;SACT,CAAA;;IACH,CAAC;IAEO,8BAAQ,GAAhB;QACE,IAAI,CAAC,IAAI,CAAC,KAAK;YAAE,IAAI,CAAC,UAAU,EAAE,CAAA;IACpC,CAAC;IAEO,gCAAU,GAAlB;QACE,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,YAAY,CAAC,IAAI,CAAC,KAAe,CAAC,CAAA;YAClC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;SACf;IACH,CAAC;IAEO,mCAAa,GAArB;QACM,IAAA,KAAA,OAAiC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAA,EAA5C,GAAG,QAAA,EAAE,KAAK,QAAA,EAAE,OAAO,QAAA,EAAE,OAAO,QAAgB,CAAA;QAEjD,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE;YACpB,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YAC1E,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU;gBAC3B,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE;gBACjD,CAAC,CAAC,CAAC,CAAA;YACL,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY;gBAC/B,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,KAAK,GAAG,EAAE;gBAC5D,CAAC,CAAC,CAAC,CAAA;YACL,OAAO;gBACL,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;oBACxB,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;oBAClB,KAAK,GAAG,EAAE,GAAG,EAAE;oBACf,OAAO,GAAG,EAAE,CAAA;SACf;QACD,OAAO;YACL,GAAG,KAAA;YACH,KAAK,OAAA;YACL,OAAO,SAAA;YACP,OAAO,SAAA;SACR,CAAA;IACH,CAAC;IAEO,gCAAU,GAAlB;QAAA,iBAoBC;QAnBO,IAAA,KAAmC,IAAI,CAAC,aAAa,EAAE,EAArD,GAAG,SAAA,EAAE,KAAK,WAAA,EAAE,OAAO,aAAA,EAAE,OAAO,aAAyB,CAAA;QAE7D,IAAI,CAAC,QAAQ,CAAC;YACZ,IAAI,EAAE,GAAG;YACT,MAAM,EAAE,KAAK;YACb,QAAQ,EAAE,OAAO;YACjB,QAAQ,EAAE,OAAO;SAClB,CAAC,CAAA;QACF,IAAI,CAAC,OAAO,EAAE,CAAA;QAEd,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE;YACpB,IAAI,CAAC,UAAU,EAAE,CAAA;YACjB,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAA;YAC5C,OAAM;SACP;QAED,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;YACtB,KAAI,CAAC,UAAU,EAAE,CAAA;QACnB,CAAC,EAAE,IAAI,CAAC,CAAA;IACV,CAAC;IAEM,sDAAgC,GAAvC,UAAwC,SAA2B;QACjE,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;YAAE,OAAM;QAE5D,IAAA,KAAiD,SAAS,IAAnD,EAAP,GAAG,mBAAG,CAAC,KAAA,EAAE,KAAwC,SAAS,MAAxC,EAAT,KAAK,mBAAG,CAAC,KAAA,EAAE,KAA6B,SAAS,QAA3B,EAAX,OAAO,mBAAG,CAAC,KAAA,EAAE,KAAgB,SAAS,QAAd,EAAX,OAAO,mBAAG,CAAC,KAAA,CAAc;QAClE,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC,CAAA;QACtD,IAAI,CAAC,UAAU,EAAE,CAAA;QACjB,IAAI,CAAC,QAAQ,EAAE,CAAA;IACjB,CAAC;IAEM,uCAAiB,GAAxB;QACE,IAAI,CAAC,QAAQ,EAAE,CAAA;IACjB,CAAC;IAEM,0CAAoB,GAA3B;QACE,IAAI,CAAC,UAAU,EAAE,CAAA;IACnB,CAAC;IAEM,sCAAgB,GAAvB;QACE,IAAI,CAAC,UAAU,EAAE,CAAA;IACnB,CAAC;IAEM,sCAAgB,GAAvB;QACE,IAAI,CAAC,QAAQ,EAAE,CAAA;IACjB,CAAC;IAEM,4BAAM,GAAb;QACQ,IAAA,KAQF,IAAI,CAAC,KAAK,EAPZ,SAAS,eAAA,EACT,WAAW,iBAAA,EACX,cAAsB,EAAtB,MAAM,mBAAG,aAAa,KAAA,EACtB,MAAM,YAAA,EACN,SAAS,eAAA,EACT,UAAU,gBAAA,EACV,YAAY,kBACA,CAAA;QAER,IAAA,KAAuC,IAAI,CAAC,KAAK,EAA/C,IAAI,UAAA,EAAE,MAAM,YAAA,EAAE,QAAQ,cAAA,EAAE,QAAQ,cAAe,CAAA;QAEvD,OAAO,CACL,oBAAC,IAAI,IACH,SAAS,EAAE,UAAU,CACnB;gBACE,cAAc,EAAE,IAAI;gBACpB,oBAAoB,EAAE,MAAM;aAC7B,EACD,SAAS,CACV,EACD,KAAK,EAAE,WAAW;YAEjB,SAAS,IAAI,CACZ,oBAAC,eAAe,IAAC,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,GAAG,KAAI,GAAG,GAAI,CAC9D;YACA,UAAU,IAAI,CACb,oBAAC,eAAe,IAAC,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,KAAK,KAAI,EAAE,GAAI,CACjE;YACA,YAAY,IAAI,CACf,oBAAC,eAAe,IAAC,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,OAAO,KAAI,EAAE,GAAI,CACrE;YACD,oBAAC,eAAe,IAAC,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,OAAO,KAAI,EAAE,GAAI,CAC/D,CACR,CAAA;IACH,CAAC;IACH,kBAAC;AAAD,CAAC,AArJD,CAAyC,KAAK,CAAC,SAAS,GAqJvD;;AAED,WAAW,CAAC,YAAY,GAAG;IACzB,WAAW,EAAE,EAAE;IACf,SAAS,EAAE,EAAE;IACb,MAAM,EAAE,KAAK;IACb,SAAS,EAAE,KAAK;IAChB,UAAU,EAAE,IAAI;IAChB,YAAY,EAAE,IAAI;IAClB,MAAM,EAAE,aAAa;IACrB,GAAG,EAAE,CAAC;IACN,KAAK,EAAE,CAAC;IACR,OAAO,EAAE,CAAC;IACV,OAAO,EAAE,CAAC;CACX,CAAA;AAED,WAAW,CAAC,SAAS,GAAG;IACtB,WAAW,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;IACtE,SAAS,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;IACnE,MAAM,EAAE,SAAS,CAAC,IAAI;IACtB,SAAS,EAAE,SAAS,CAAC,IAAI;IACzB,UAAU,EAAE,SAAS,CAAC,IAAI;IAC1B,YAAY,EAAE,SAAS,CAAC,IAAI;IAC5B,MAAM,EAAE,SAAS,CAAC,MAAM;IACxB,GAAG,EAAE,SAAS,CAAC,MAAM;IACrB,KAAK,EAAE,SAAS,CAAC,MAAM;IACvB,OAAO,EAAE,SAAS,CAAC,MAAM;IACzB,OAAO,EAAE,SAAS,CAAC,MAAM;IACzB,QAAQ,EAAE,SAAS,CAAC,IAAI;CACzB,CAAA\"}"}
