{"code":"import { __extends } from \"tslib\";\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { Text, View } from '@tarojs/components';\r\nimport { delayQuerySelector, uuid } from '../../common/utils';\r\nvar AtAccordion = /** @class */ (function (_super) {\r\n    __extends(AtAccordion, _super);\r\n    function AtAccordion(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleClick = function (event) {\r\n            var open = _this.props.open;\r\n            if (!_this.isCompleted)\r\n                return;\r\n            _this.props.onClick && _this.props.onClick(!open, event);\r\n        };\r\n        _this.isCompleted = true;\r\n        _this.startOpen = false;\r\n        _this.state = {\r\n            componentId: uuid(),\r\n            wrapperHeight: 0\r\n        };\r\n        return _this;\r\n    }\r\n    AtAccordion.prototype.toggleWithAnimation = function () {\r\n        var _this = this;\r\n        var _a = this.props, open = _a.open, isAnimation = _a.isAnimation;\r\n        var componentId = this.state.componentId;\r\n        if (!this.isCompleted || !isAnimation)\r\n            return;\r\n        this.isCompleted = false;\r\n        delayQuerySelector(\"#at-accordion__body-\".concat(componentId), 0).then(function (rect) {\r\n            var height = parseInt(rect[0].height.toString());\r\n            var startHeight = open ? height : 0;\r\n            var endHeight = open ? 0 : height;\r\n            _this.startOpen = false;\r\n            _this.setState({\r\n                wrapperHeight: startHeight\r\n            }, function () {\r\n                setTimeout(function () {\r\n                    _this.setState({\r\n                        wrapperHeight: endHeight\r\n                    }, function () {\r\n                        setTimeout(function () {\r\n                            _this.isCompleted = true;\r\n                            _this.setState({});\r\n                        }, 700);\r\n                    });\r\n                }, 100);\r\n            });\r\n        });\r\n    };\r\n    AtAccordion.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.open !== this.props.open) {\r\n            this.startOpen = !!nextProps.open && !!nextProps.isAnimation;\r\n            this.toggleWithAnimation();\r\n        }\r\n    };\r\n    AtAccordion.prototype.render = function () {\r\n        var _a;\r\n        var _b = this.props, customStyle = _b.customStyle, className = _b.className, title = _b.title, icon = _b.icon, hasBorder = _b.hasBorder, open = _b.open, note = _b.note;\r\n        var wrapperHeight = this.state.wrapperHeight;\r\n        var rootCls = classNames('at-accordion', className);\r\n        var prefixClass = (icon && icon.prefixClass) || 'at-icon';\r\n        var iconCls = classNames((_a = {},\r\n            _a[prefixClass] = true,\r\n            _a[\"\".concat(prefixClass, \"-\").concat(icon && icon.value)] = icon && icon.value,\r\n            _a['at-accordion__icon'] = true,\r\n            _a));\r\n        var headerCls = classNames('at-accordion__header', {\r\n            'at-accordion__header--noborder': !hasBorder\r\n        });\r\n        var arrowCls = classNames('at-accordion__arrow', {\r\n            'at-accordion__arrow--folded': !!open\r\n        });\r\n        var contentCls = classNames('at-accordion__content', {\r\n            'at-accordion__content--inactive': (!open && this.isCompleted) || this.startOpen\r\n        });\r\n        var iconStyle = {\r\n            color: (icon && icon.color) || '',\r\n            fontSize: (icon && \"\".concat(icon.size, \"px\")) || ''\r\n        };\r\n        var contentStyle = { height: \"\".concat(wrapperHeight, \"px\") };\r\n        if (this.isCompleted) {\r\n            contentStyle.height = '';\r\n        }\r\n        var componentId = this.state.componentId;\r\n        return (React.createElement(View, { className: rootCls, style: customStyle },\r\n            React.createElement(View, { className: headerCls, onClick: this.handleClick },\r\n                icon && icon.value && (React.createElement(Text, { className: iconCls, style: iconStyle })),\r\n                React.createElement(View, { className: 'at-accordion__info' },\r\n                    React.createElement(View, { className: 'at-accordion__info__title' }, title),\r\n                    React.createElement(View, { className: 'at-accordion__info__note' }, note)),\r\n                React.createElement(View, { className: arrowCls },\r\n                    React.createElement(Text, { className: 'at-icon at-icon-chevron-down' }))),\r\n            React.createElement(View, { style: contentStyle, className: contentCls },\r\n                React.createElement(View, { id: \"at-accordion__body-\".concat(componentId), className: 'at-accordion__body' }, this.props.children))));\r\n    };\r\n    return AtAccordion;\r\n}(React.Component));\r\nexport default AtAccordion;\r\nAtAccordion.defaultProps = {\r\n    open: false,\r\n    customStyle: '',\r\n    className: '',\r\n    title: '',\r\n    note: '',\r\n    icon: { value: '' },\r\n    hasBorder: true,\r\n    isAnimation: true\r\n};\r\nAtAccordion.propTypes = {\r\n    customStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\r\n    className: PropTypes.oneOfType([PropTypes.array, PropTypes.string]),\r\n    open: PropTypes.bool,\r\n    isAnimation: PropTypes.bool,\r\n    title: PropTypes.string,\r\n    note: PropTypes.string,\r\n    icon: PropTypes.object,\r\n    hasBorder: PropTypes.bool,\r\n    onClick: PropTypes.func\r\n};\r\n//# sourceMappingURL=index.js.map","references":["/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+classnames@2.2.10/node_modules/@types/classnames/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/prop-types@15.7.2/node_modules/prop-types/index.js","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+react@18.2.21/node_modules/@types/react/ts5.0/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@tarojs+components@3.6.6_@types+react-native@0.64.13_@types+react@18.2.21_react@18.2.0/node_modules/@tarojs/components/types/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@tarojs+components@3.6.6_@types+react-native@0.64.13_@types+react@18.2.21_react@18.2.0/node_modules/@tarojs/components/types/common.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/types/accordion.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/src/common/utils.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/accordion/index.tsx\"],\"names\":[],\"mappings\":\";AAAA,OAAO,UAAU,MAAM,YAAY,CAAA;AACnC,OAAO,SAAyB,MAAM,YAAY,CAAA;AAClD,OAAO,KAAK,MAAM,OAAO,CAAA;AACzB,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAA;AAG/C,OAAO,EAAE,kBAAkB,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAA;AAE7D;IAAyC,+BAGxC;IAOC,qBAAmB,KAAuB;QAA1C,YACE,kBAAM,KAAK,CAAC,SAOb;QAEO,iBAAW,GAAG,UAAC,KAAkB;YAC/B,IAAA,IAAI,GAAK,KAAI,CAAC,KAAK,KAAf,CAAe;YAC3B,IAAI,CAAC,KAAI,CAAC,WAAW;gBAAE,OAAM;YAE7B,KAAI,CAAC,KAAK,CAAC,OAAO,IAAI,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;QACxD,CAAC,CAAA;QAbC,KAAI,CAAC,WAAW,GAAG,IAAI,CAAA;QACvB,KAAI,CAAC,SAAS,GAAG,KAAK,CAAA;QACtB,KAAI,CAAC,KAAK,GAAG;YACX,WAAW,EAAE,IAAI,EAAE;YACnB,aAAa,EAAE,CAAC;SACjB,CAAA;;IACH,CAAC;IASO,yCAAmB,GAA3B;QAAA,iBAiCC;QAhCO,IAAA,KAAwB,IAAI,CAAC,KAAK,EAAhC,IAAI,UAAA,EAAE,WAAW,iBAAe,CAAA;QAChC,IAAA,WAAW,GAAK,IAAI,CAAC,KAAK,YAAf,CAAe;QAClC,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,WAAW;YAAE,OAAM;QAE7C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;QAExB,kBAAkB,CAAC,8BAAuB,WAAW,CAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;YACnE,IAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAA;YAClD,IAAM,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;YACrC,IAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAA;YACnC,KAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,KAAI,CAAC,QAAQ,CACX;gBACE,aAAa,EAAE,WAAW;aAC3B,EACD;gBACE,UAAU,CAAC;oBACT,KAAI,CAAC,QAAQ,CACX;wBACE,aAAa,EAAE,SAAS;qBACzB,EACD;wBACE,UAAU,CAAC;4BACT,KAAI,CAAC,WAAW,GAAG,IAAI,CAAA;4BACvB,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;wBACnB,CAAC,EAAE,GAAG,CAAC,CAAA;oBACT,CAAC,CACF,CAAA;gBACH,CAAC,EAAE,GAAG,CAAC,CAAA;YACT,CAAC,CACF,CAAA;QACH,CAAC,CAAC,CAAA;IACJ,CAAC;IAEM,sDAAgC,GAAvC,UAAwC,SAA2B;QACjE,IAAI,SAAS,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;YACtC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,CAAC,SAAS,CAAC,WAAW,CAAA;YAC5D,IAAI,CAAC,mBAAmB,EAAE,CAAA;SAC3B;IACH,CAAC;IAEM,4BAAM,GAAb;;QACQ,IAAA,KACJ,IAAI,CAAC,KAAK,EADJ,WAAW,iBAAA,EAAE,SAAS,eAAA,EAAE,KAAK,WAAA,EAAE,IAAI,UAAA,EAAE,SAAS,eAAA,EAAE,IAAI,UAAA,EAAE,IAAI,UACtD,CAAA;QACJ,IAAA,aAAa,GAAK,IAAI,CAAC,KAAK,cAAf,CAAe;QAEpC,IAAM,OAAO,GAAG,UAAU,CAAC,cAAc,EAAE,SAAS,CAAC,CAAA;QACrD,IAAM,WAAW,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,SAAS,CAAA;QAC3D,IAAM,OAAO,GAAG,UAAU;YACxB,GAAC,WAAW,IAAG,IAAI;YACnB,GAAC,UAAG,WAAW,cAAI,IAAI,IAAI,IAAI,CAAC,KAAK,CAAE,IAAG,IAAI,IAAI,IAAI,CAAC,KAAK;YAC5D,wBAAoB,GAAE,IAAI;gBAC1B,CAAA;QACF,IAAM,SAAS,GAAG,UAAU,CAAC,sBAAsB,EAAE;YACnD,gCAAgC,EAAE,CAAC,SAAS;SAC7C,CAAC,CAAA;QACF,IAAM,QAAQ,GAAG,UAAU,CAAC,qBAAqB,EAAE;YACjD,6BAA6B,EAAE,CAAC,CAAC,IAAI;SACtC,CAAC,CAAA;QACF,IAAM,UAAU,GAAG,UAAU,CAAC,uBAAuB,EAAE;YACrD,iCAAiC,EAC/B,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,SAAS;SAChD,CAAC,CAAA;QACF,IAAM,SAAS,GAAG;YAChB,KAAK,EAAE,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;YACjC,QAAQ,EAAE,CAAC,IAAI,IAAI,UAAG,IAAI,CAAC,IAAI,OAAI,CAAC,IAAI,EAAE;SAC3C,CAAA;QACD,IAAM,YAAY,GAAG,EAAE,MAAM,EAAE,UAAG,aAAa,OAAI,EAAE,CAAA;QAErD,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,YAAY,CAAC,MAAM,GAAG,EAAE,CAAA;SACzB;QAEO,IAAA,WAAW,GAAK,IAAI,CAAC,KAAK,YAAf,CAAe;QAElC,OAAO,CACL,oBAAC,IAAI,IAAC,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW;YAC1C,oBAAC,IAAI,IAAC,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,WAAW;gBAClD,IAAI,IAAI,IAAI,CAAC,KAAK,IAAI,CACrB,oBAAC,IAAI,IAAC,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,GAAS,CACpD;gBACD,oBAAC,IAAI,IAAC,SAAS,EAAC,oBAAoB;oBAClC,oBAAC,IAAI,IAAC,SAAS,EAAC,2BAA2B,IAAE,KAAK,CAAQ;oBAC1D,oBAAC,IAAI,IAAC,SAAS,EAAC,0BAA0B,IAAE,IAAI,CAAQ,CACnD;gBACP,oBAAC,IAAI,IAAC,SAAS,EAAE,QAAQ;oBACvB,oBAAC,IAAI,IAAC,SAAS,EAAC,8BAA8B,GAAQ,CACjD,CACF;YACP,oBAAC,IAAI,IAAC,KAAK,EAAE,YAAY,EAAE,SAAS,EAAE,UAAU;gBAC9C,oBAAC,IAAI,IACH,EAAE,EAAE,6BAAsB,WAAW,CAAE,EACvC,SAAS,EAAC,oBAAoB,IAE7B,IAAI,CAAC,KAAK,CAAC,QAAQ,CACf,CACF,CACF,CACR,CAAA;IACH,CAAC;IACH,kBAAC;AAAD,CAAC,AAhID,CAAyC,KAAK,CAAC,SAAS,GAgIvD;;AAED,WAAW,CAAC,YAAY,GAAG;IACzB,IAAI,EAAE,KAAK;IACX,WAAW,EAAE,EAAE;IACf,SAAS,EAAE,EAAE;IACb,KAAK,EAAE,EAAE;IACT,IAAI,EAAE,EAAE;IACR,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE;IACnB,SAAS,EAAE,IAAI;IACf,WAAW,EAAE,IAAI;CAClB,CAAA;AAED,WAAW,CAAC,SAAS,GAAG;IACtB,WAAW,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;IACtE,SAAS,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;IACnE,IAAI,EAAE,SAAS,CAAC,IAAI;IACpB,WAAW,EAAE,SAAS,CAAC,IAAI;IAC3B,KAAK,EAAE,SAAS,CAAC,MAAM;IACvB,IAAI,EAAE,SAAS,CAAC,MAAM;IACtB,IAAI,EAAE,SAAS,CAAC,MAAM;IACtB,SAAS,EAAE,SAAS,CAAC,IAAI;IACzB,OAAO,EAAE,SAAS,CAAC,IAAI;CACxB,CAAA\"}"}
