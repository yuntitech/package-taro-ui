{"code":"import { __extends } from \"tslib\";\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { Input, Text, View } from '@tarojs/components';\r\nvar AtSearchBar = /** @class */ (function (_super) {\r\n    __extends(AtSearchBar, _super);\r\n    function AtSearchBar(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleFocus = function (event) {\r\n            _this.setState({\r\n                isFocus: true\r\n            });\r\n            _this.props.onFocus && _this.props.onFocus(event);\r\n        };\r\n        _this.handleBlur = function (event) {\r\n            _this.setState({\r\n                isFocus: false\r\n            });\r\n            _this.props.onBlur && _this.props.onBlur(event);\r\n        };\r\n        _this.handleChange = function (e) {\r\n            _this.props.onChange(e.detail.value, e);\r\n        };\r\n        _this.handleClear = function (event) {\r\n            if (_this.props.onClear) {\r\n                _this.props.onClear(event);\r\n            }\r\n            else {\r\n                _this.props.onChange('', event);\r\n            }\r\n        };\r\n        _this.handleConfirm = function (event) {\r\n            _this.props.onConfirm && _this.props.onConfirm(event);\r\n        };\r\n        _this.handleActionClick = function (event) {\r\n            _this.props.onActionClick && _this.props.onActionClick(event);\r\n        };\r\n        _this.state = {\r\n            isFocus: !!props.focus\r\n        };\r\n        return _this;\r\n    }\r\n    AtSearchBar.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.focus !== this.props.focus) {\r\n            this.setState({ isFocus: !!nextProps.focus });\r\n        }\r\n    };\r\n    AtSearchBar.prototype.render = function () {\r\n        var _a = this.props, value = _a.value, placeholder = _a.placeholder, maxLength = _a.maxLength, fixed = _a.fixed, disabled = _a.disabled, showActionButton = _a.showActionButton, _b = _a.actionName, actionName = _b === void 0 ? '搜索' : _b, inputType = _a.inputType, // 处理issue#464\r\n        className = _a.className, customStyle = _a.customStyle, enableNative = _a.enableNative;\r\n        var isFocus = this.state.isFocus;\r\n        var fontSize = 14;\r\n        var rootCls = classNames('at-search-bar', {\r\n            'at-search-bar--fixed': fixed\r\n        }, className);\r\n        var placeholderWrapStyle = {};\r\n        var actionStyle = {};\r\n        if (isFocus || (!isFocus && value)) {\r\n            actionStyle.opacity = 1;\r\n            actionStyle.marginRight = \"0\";\r\n            placeholderWrapStyle.flexGrow = 0;\r\n        }\r\n        else if (!isFocus && !value) {\r\n            placeholderWrapStyle.flexGrow = 1;\r\n            actionStyle.opacity = 0;\r\n            actionStyle.marginRight = \"-\".concat((actionName.length + 1) * fontSize + fontSize / 2 + 10, \"px\");\r\n        }\r\n        if (showActionButton) {\r\n            actionStyle.opacity = 1;\r\n            actionStyle.marginRight = \"0\";\r\n        }\r\n        var clearIconStyle = { display: 'flex' };\r\n        var placeholderStyle = { visibility: 'hidden' };\r\n        if (!value.length) {\r\n            clearIconStyle.display = 'none';\r\n            placeholderStyle.visibility = 'visible';\r\n        }\r\n        return (React.createElement(View, { className: rootCls, style: customStyle },\r\n            React.createElement(View, { className: 'at-search-bar__input-cnt' },\r\n                React.createElement(View, { className: 'at-search-bar__placeholder-wrap', style: placeholderWrapStyle },\r\n                    React.createElement(Text, { className: 'at-icon at-icon-search' }),\r\n                    React.createElement(Text, { className: 'at-search-bar__placeholder', style: placeholderStyle }, isFocus ? '' : placeholder)),\r\n                React.createElement(Input, { className: 'at-search-bar__input', type: inputType, confirmType: 'search', value: value, focus: isFocus, disabled: disabled, maxlength: maxLength, \r\n                    // @ts-ignore ci 上面这个检查不通过, 暂时跳过ts检查\r\n                    enableNative: enableNative, onInput: this.handleChange, onFocus: this.handleFocus, onBlur: this.handleBlur, onConfirm: this.handleConfirm }),\r\n                React.createElement(View, { className: 'at-search-bar__clear', style: clearIconStyle, onTouchStart: this.handleClear },\r\n                    React.createElement(Text, { className: 'at-icon at-icon-close-circle' }))),\r\n            React.createElement(View, { className: 'at-search-bar__action', style: actionStyle, onClick: this.handleActionClick }, actionName)));\r\n    };\r\n    return AtSearchBar;\r\n}(React.Component));\r\nexport default AtSearchBar;\r\nAtSearchBar.defaultProps = {\r\n    value: '',\r\n    placeholder: '搜索',\r\n    maxLength: 140,\r\n    fixed: false,\r\n    focus: false,\r\n    disabled: false,\r\n    showActionButton: false,\r\n    actionName: '搜索',\r\n    inputType: 'text',\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onChange: function () { },\r\n    enableNative: true\r\n};\r\nAtSearchBar.propTypes = {\r\n    value: PropTypes.string,\r\n    placeholder: PropTypes.string,\r\n    maxLength: PropTypes.number,\r\n    fixed: PropTypes.bool,\r\n    focus: PropTypes.bool,\r\n    disabled: PropTypes.bool,\r\n    showActionButton: PropTypes.bool,\r\n    actionName: PropTypes.string,\r\n    inputType: PropTypes.oneOf(['text', 'number', 'idcard', 'digit']),\r\n    onChange: PropTypes.func,\r\n    onFocus: PropTypes.func,\r\n    onBlur: PropTypes.func,\r\n    onConfirm: PropTypes.func,\r\n    onActionClick: PropTypes.func,\r\n    onClear: PropTypes.func,\r\n    enableNative: PropTypes.bool\r\n};\r\n//# sourceMappingURL=index.js.map","references":["/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+classnames@2.2.10/node_modules/@types/classnames/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/prop-types@15.7.2/node_modules/prop-types/index.js","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+react@18.2.21/node_modules/@types/react/ts5.0/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@tarojs+components@3.6.6_@types+react-native@0.64.13_@types+react@18.2.21_react@18.2.0/node_modules/@tarojs/components/types/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@tarojs+components@3.6.6_@types+react-native@0.64.13_@types+react@18.2.21_react@18.2.0/node_modules/@tarojs/components/types/common.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/types/search-bar.d.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/search-bar/index.tsx\"],\"names\":[],\"mappings\":\"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\"}"}
