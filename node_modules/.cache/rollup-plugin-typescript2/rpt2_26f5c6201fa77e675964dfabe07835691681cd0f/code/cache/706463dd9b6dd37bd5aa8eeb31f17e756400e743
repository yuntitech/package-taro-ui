{"code":"import { __extends } from \"tslib\";\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { Image, Text, View } from '@tarojs/components';\r\nimport statusImg from './img.json';\r\nvar AtToast = /** @class */ (function (_super) {\r\n    __extends(AtToast, _super);\r\n    function AtToast(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleClick = function (event) {\r\n            var _a = _this.props, onClick = _a.onClick, status = _a.status;\r\n            if (status === 'loading') {\r\n                return;\r\n            }\r\n            if (onClick) {\r\n                return onClick(event);\r\n            }\r\n            _this.close();\r\n        };\r\n        var isOpened = props.isOpened, duration = props.duration;\r\n        if (isOpened) {\r\n            _this.makeTimer(duration || 0);\r\n        }\r\n        _this._timer = null;\r\n        _this.state = {\r\n            _isOpened: isOpened\r\n        };\r\n        return _this;\r\n    }\r\n    AtToast.prototype.clearTimmer = function () {\r\n        if (this._timer) {\r\n            clearTimeout(this._timer);\r\n            this._timer = null;\r\n        }\r\n    };\r\n    AtToast.prototype.makeTimer = function (duration) {\r\n        var _this = this;\r\n        if (duration === 0) {\r\n            return;\r\n        }\r\n        this._timer = setTimeout(function () {\r\n            _this.close();\r\n        }, +duration);\r\n    };\r\n    AtToast.prototype.close = function () {\r\n        var _isOpened = this.state._isOpened;\r\n        if (_isOpened) {\r\n            this.setState({\r\n                _isOpened: false\r\n            }, this.handleClose // TODO: Fix dirty hack\r\n            );\r\n            this.clearTimmer();\r\n        }\r\n    };\r\n    AtToast.prototype.handleClose = function (event) {\r\n        // TODO: Fix dirty hack\r\n        if (typeof this.props.onClose === 'function') {\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.props.onClose(event);\r\n        }\r\n    };\r\n    AtToast.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\r\n        var isOpened = nextProps.isOpened, duration = nextProps.duration;\r\n        if (!isOpened) {\r\n            this.close();\r\n            return;\r\n        }\r\n        if (!this.state._isOpened) {\r\n            this.setState({\r\n                _isOpened: true\r\n            });\r\n        }\r\n        else {\r\n            this.clearTimmer();\r\n        }\r\n        this.makeTimer(duration || 0);\r\n    };\r\n    AtToast.prototype.render = function () {\r\n        var _a, _b;\r\n        var _isOpened = this.state._isOpened;\r\n        var _c = this.props, customStyle = _c.customStyle, text = _c.text, icon = _c.icon, status = _c.status, image = _c.image, hasMask = _c.hasMask;\r\n        /* eslint-disable @typescript-eslint/no-non-null-assertion */\r\n        var realImg = image || statusImg[status] || null;\r\n        var isRenderIcon = !!(icon && !(image || statusImg[status]));\r\n        /* eslint-enable @typescript-eslint/no-non-null-assertion */\r\n        var bodyClass = classNames('toast-body', (_a = {\r\n                'at-toast__body--custom-image': image,\r\n                'toast-body--text': !realImg && !icon\r\n            },\r\n            _a[\"at-toast__body--\".concat(status)] = !!status,\r\n            _a));\r\n        var iconClass = classNames('at-icon', (_b = {},\r\n            _b[\"at-icon-\".concat(icon)] = icon,\r\n            _b));\r\n        return _isOpened ? (React.createElement(View, { className: classNames('at-toast', this.props.className) },\r\n            hasMask && React.createElement(View, { className: 'at-toast__overlay' }),\r\n            React.createElement(View, { className: bodyClass, style: customStyle, onClick: this.handleClick },\r\n                React.createElement(View, { className: 'toast-body-content' },\r\n                    realImg ? (React.createElement(View, { className: 'toast-body-content__img' },\r\n                        React.createElement(Image, { className: 'toast-body-content__img-item', src: realImg, mode: 'scaleToFill' }))) : null,\r\n                    isRenderIcon && (React.createElement(View, { className: 'toast-body-content__icon' },\r\n                        React.createElement(Text, { className: iconClass }))),\r\n                    text && (React.createElement(View, { className: 'toast-body-content__info' },\r\n                        React.createElement(Text, null, text))))))) : null;\r\n    };\r\n    return AtToast;\r\n}(React.Component));\r\nexport default AtToast;\r\nAtToast.defaultProps = {\r\n    duration: 3000,\r\n    isOpened: false\r\n};\r\nAtToast.propTypes = {\r\n    text: PropTypes.string,\r\n    icon: PropTypes.string,\r\n    hasMask: PropTypes.bool,\r\n    image: PropTypes.string,\r\n    isOpened: PropTypes.bool,\r\n    duration: PropTypes.number,\r\n    status: PropTypes.oneOf(['', 'error', 'loading', 'success']),\r\n    onClick: PropTypes.func,\r\n    onClose: PropTypes.func\r\n};\r\n//# sourceMappingURL=index.js.map","references":["/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+classnames@2.2.10/node_modules/@types/classnames/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/prop-types@15.7.2/node_modules/prop-types/index.js","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@types+react@18.2.21/node_modules/@types/react/ts5.0/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@tarojs+components@3.6.6_@types+react-native@0.64.13_@types+react@18.2.21_react@18.2.0/node_modules/@tarojs/components/types/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/@tarojs+components@3.6.6_@types+react-native@0.64.13_@types+react@18.2.21_react@18.2.0/node_modules/@tarojs/components/types/common.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/types/toast.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/src/components/toast/img.json"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/toast/index.tsx\"],\"names\":[],\"mappings\":\"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\"}"}
