{"code":"import dayjs from 'dayjs';\r\nimport _flow from 'lodash/flow';\r\nimport * as constant from './constant';\r\nimport plugins from './plugins';\r\nvar TOTAL = 7 * 6;\r\nfunction getFullItem(item, options, selectedDate, isShowStatus) {\r\n    if (options.marks.find(function (x) { return x.value === item.value; })) {\r\n        item.marks = [\r\n            {\r\n                value: item.value\r\n            }\r\n        ];\r\n    }\r\n    if (!isShowStatus)\r\n        return item;\r\n    var bindedPlugins = plugins.map(function (fn) {\r\n        return fn.bind(null, {\r\n            options: options,\r\n            selectedDate: selectedDate\r\n        });\r\n    });\r\n    return _flow(bindedPlugins)(item);\r\n}\r\nexport default function generateCalendarGroup(options) {\r\n    return function (generateDate, selectedDate, isShowStatus) {\r\n        var date = dayjs(generateDate);\r\n        var format = options.format;\r\n        // 获取生成日期的第一天 和 最后一天\r\n        var firstDate = date.startOf('month');\r\n        var lastDate = date.endOf('month');\r\n        var preMonthDate = date.subtract(1, 'month');\r\n        var list = [];\r\n        var nowMonthDays = date.daysInMonth(); // 获取这个月有多少天\r\n        var preMonthLastDay = preMonthDate.endOf('month').day(); // 获取上个月最后一天是周几\r\n        // 生成上个月的日期\r\n        for (var i_1 = 1; i_1 <= preMonthLastDay + 1; i_1++) {\r\n            var thisDate = firstDate.subtract(i_1, 'day').startOf('day');\r\n            var item = {\r\n                marks: [],\r\n                _value: thisDate,\r\n                text: thisDate.date(),\r\n                type: constant.TYPE_PRE_MONTH,\r\n                value: thisDate.format(format)\r\n            };\r\n            item = getFullItem(item, options, selectedDate, isShowStatus);\r\n            list.push(item);\r\n        }\r\n        list.reverse();\r\n        // 生成这个月的日期\r\n        for (var i_2 = 0; i_2 < nowMonthDays; i_2++) {\r\n            var thisDate = firstDate.add(i_2, 'day').startOf('day');\r\n            var item = {\r\n                marks: [],\r\n                _value: thisDate,\r\n                text: thisDate.date(),\r\n                type: constant.TYPE_NOW_MONTH,\r\n                value: thisDate.format(format)\r\n            };\r\n            item = getFullItem(item, options, selectedDate, isShowStatus);\r\n            list.push(item);\r\n        }\r\n        // 生成下个月的日期\r\n        var i = 1;\r\n        while (list.length < TOTAL) {\r\n            var thisDate = lastDate.add(i++, 'day').startOf('day');\r\n            var item = {\r\n                marks: [],\r\n                _value: thisDate,\r\n                text: thisDate.date(),\r\n                type: constant.TYPE_NEXT_MONTH,\r\n                value: thisDate.format(format)\r\n            };\r\n            item = getFullItem(item, options, selectedDate, isShowStatus);\r\n            list.push(item);\r\n        }\r\n        return {\r\n            list: list,\r\n            value: generateDate\r\n        };\r\n    };\r\n}\r\nexport function getGenerateDate(date) {\r\n    return dayjs(date).startOf('month');\r\n}\r\n//# sourceMappingURL=helper.js.map","references":["/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/dayjs@1.7.7/node_modules/dayjs/index.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/node_modules/.pnpm/lodash@4.17.10/node_modules/lodash/flow.js","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/types/calendar.d.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/src/components/calendar/common/constant.ts","/Users/leejunhui/Develop/React/Library/taro-ui/packages/taro-ui/src/components/calendar/common/plugins.ts"],"map":"{\"version\":3,\"file\":\"helper.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/calendar/common/helper.ts\"],\"names\":[],\"mappings\":\"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\"}"}
